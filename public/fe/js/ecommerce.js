const formatCurrency=e=>new Intl.NumberFormat("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e).replace(/,00$/,"");var miniChartBody=document.getElementById("mini-cart-body");const getChartDetails=()=>{fetch("/cart",{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((e=>{miniChartBody.innerHTML=e.cartHtml;const t=document.getElementById("cart-items-count");t&&(t.classList.remove("opacity-0"),t.innerText=e.cartDetails.items_count,0===e.cartDetails.items_count&&t.classList.add("opacity-0"))}))},removeItemFromCart=e=>{FreezeUI({text:" "}),fetch("/cart/remove/"+e,{method:"POST",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}).then((function(e){return e.json()})).then((e=>{getChartDetails();let t=document.querySelector(e.productButtons);t&&(t.outerHTML=e.productButtonsHtml),UnFreezeUI()}))},changeItemQuantity=(e,t)=>{FreezeUI({text:" "}),fetch("/cart/change-quantity/"+e+"/"+t,{method:"POST",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}).then((function(e){return e.json()})).then((e=>{UnFreezeUI(),getChartDetails();let t=document.querySelector(e.productButtons);t&&(t.outerHTML=e.productButtonsHtml)}))},addToCart=e=>{let t=e.closest("form"),n=new FormData(t),r=new URLSearchParams(n).toString();FreezeUI({text:" "}),fetch("/cart/add-item?"+r,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}).then((function(e){return e.json()})).then((e=>{UnFreezeUI(),setTimeout((()=>{var t=`<div class="alert alert-success mb-0 px-0" role="alert">\n                <div class="container-fluid px-xl-5 px-xxl-7">\n                    <div class="d-flex align-items-center">\n                        <i class="bi bi-check-circle-fill text-success fs-4 me-2"></i>\n                        <div>${e.message}</div>\n                        <a href="/cart" class="btn btn-success btn-sm ms-auto">Sepete Git</a>\n                    </div>\n                </div>\n            </div>`;document.getElementById("flash-message").innerHTML=t;let n=document.querySelector(e.productButtons);n&&(n.outerHTML=e.productButtonsHtml),getChartDetails()}),500)}))},variantSelection=(e,t=null,n=null)=>{FreezeUI({selector:"#product-variant-selection-div",text:" "});let r="",a=document.getElementById("product-variant-selection-div");if(t&&n){n[t.dataset.slug]=t.value;for(let e in n)n.hasOwnProperty(e)&&(r.length>0&&(r+="&"),r+=e+"="+encodeURIComponent(n[e]))}fetch("/fetch/variant-selection/"+e.uuid+"?"+r,{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((e=>{a.innerHTML=e.html})).then((e=>{}))},productOptionSelection=(e=null,t=null)=>{FreezeUI({selector:"#product-variant-selection-div",text:" "});let n="",r=document.getElementById("product-variant-selection-div");if(e&&t){t[e.dataset.slug]=e.value;for(let e in t)t.hasOwnProperty(e)&&(n.length>0&&(n+="&"),n+=e+"="+encodeURIComponent(t[e]))}fetch("/fetch/product-option-selection/"+e.dataset.productUuid+"?"+n,{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((e=>{r.innerHTML=e.html})).then((e=>{initTooltips()}))},variantPrepareAddToCartButton=e=>{let t=document.getElementById("product-variant-basket-buttons");fetch("/fetch/variant-selection-buttons/"+e,{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((e=>{t.innerHTML=e.html}))},afterQuantityChange=e=>{let t=e.closest("form"),n=t.querySelector("[data-type=minus]"),r=t.querySelector("[data-type=plus]"),a=parseInt(e.getAttribute("min")),i=parseInt(e.getAttribute("max")),s=parseInt(e.value);s>=a?n.disabled=!1:e.value=i,s<=i?r.disabled=!1:e.value=i},quantityChange=e=>{let t=e.closest("form"),n=e.dataset.field,r=e.dataset.type,a=t.querySelector('input[name="'+n+'"]');var i=parseInt(a.value);isNaN(i)?a.value=1:"minus"==r?(i>a.getAttribute("min")&&(a.value=i-1,afterQuantityChange(a)),parseInt(a.value)==a.getAttribute("min")&&(e.disabled=!0)):"plus"==r&&(i<a.getAttribute("max")&&(a.value=i+1,afterQuantityChange(a)),parseInt(a.value)==a.getAttribute("max")&&(e.disabled=!0))},initProductSwipers=()=>{const e=document.querySelectorAll(".product-swiper");Array.from(e).forEach((e=>{if(e.classList.contains("swiper-initialized"))return;new Swiper(e,{pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}))},initRelatedSwipers=()=>{const e=document.querySelectorAll(".related-products-swiper");Array.from(e).forEach((e=>{if(e.classList.contains("swiper-initialized"))return;new Swiper(e,{slidesPerView:1,spaceBetween:15,pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{640:{slidesPerView:2,spaceBetween:15},992:{slidesPerView:3,spaceBetween:15},1200:{slidesPerView:5,spaceBetween:15}}})}))},initProductMainSwiper=()=>{const e=document.getElementById("product-main-swiper"),t=document.getElementById("product-main-thumb-swiper");if(!e)return;const n=new Swiper(t,{slidesPerView:5,spaceBetween:15,watchSlidesProgress:!0,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},breakpoints:{992:{slidesPerView:6}}});new Swiper(e,{slidesPerView:1,spaceBetween:0,grabCursor:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:n}})};document.addEventListener("DOMContentLoaded",(function(){initProductSwipers(),initRelatedSwipers(),initProductMainSwiper()}));const openOffCanvasProduct=e=>{e.dataset.productTitle&&e.dataset.productUuid&&(dynamicOffCanvasTitle.innerText=e.dataset.productTitle,dynamicOffCanvas.show(),fetch("/fetch/product-details/"+e.dataset.productUuid).then((function(e){return e.json()})).then((e=>{dynamicOffCanvasBody.innerHTML=e.html})).then((()=>{initRelatedSwipers(),initOffcanvasContentSwipers(),initProductSwipers(),initProductMainSwiper(),initPopovers(),initTooltips();const e=dynamicOffCanvasBody.querySelector(".needs-validation"),t=dynamicOffCanvasBody.querySelectorAll(".pickaday");e&&checkFormValid(e),Array.from(t).forEach((e=>{initDatePicker(e)}))})))},useForBilling=e=>{const t=e.closest("form").querySelector(".for-billing");e.checked?t.classList.remove("d-none"):t.classList.add("d-none")},billingType=e=>{const t=e.closest("form"),n=t.querySelector(".billing-details-bireysel"),r=t.querySelector(".billing-details-kurumsal");if("Bireysel"===e.value)return n.classList.remove("d-none"),r.classList.add("d-none"),n.querySelectorAll("input").forEach((e=>{e.setAttribute("required","required")})),void r.querySelectorAll("input").forEach((e=>{e.removeAttribute("required")}));n.classList.add("d-none"),r.classList.remove("d-none"),n.querySelectorAll("input").forEach((e=>{e.removeAttribute("required")})),r.querySelectorAll("input").forEach((e=>{e.setAttribute("required","required")}))},addNewAdress=e=>{e.dataset.addressTitle&&(dynamicOffCanvasTitle.innerText=e.dataset.addressTitle,dynamicOffCanvas.show(),fetch("/hesabim/adres/create",{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((e=>{e.success&&(dynamicOffCanvasBody.innerHTML=e.html)})).then((()=>{checkFormValid(dynamicOffCanvasBody.querySelector("form"))})))},updateAddress=e=>{e.dataset.addressTitle&&e.dataset.addressId&&(dynamicOffCanvasTitle.innerText=e.dataset.addressTitle,dynamicOffCanvas.show(),fetch("/hesabim/adres/"+e.dataset.addressId,{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((e=>{e.success&&(dynamicOffCanvasBody.innerHTML=e.html)})))},toggleGiftFriend=e=>{const t=document.getElementById("gift-friend-details");t&&(t.classList.toggle("d-none"),e.checked?t.querySelectorAll(".form-control").forEach((e=>{e.setAttribute("required","required")})):t.querySelectorAll(".form-control").forEach((e=>{e.removeAttribute("required")})))},setStockAndButton=e=>{let t=e.closest("form"),n=t.querySelector("[name=quantity]"),r=t.querySelector(".btn-add-to-cart"),a=e.dataset.stock;n.setAttribute("max",parseInt(a)),r.disabled=!1,afterQuantityChange(n)},processSorting=e=>{FreezeUI({text:" "});const t=document.querySelector(".sticky-filters");if(t)return t.querySelector('[name="sort"]').value=e.value,void setTimeout((()=>{t.submit()}),100);e.closest("form").submit()};(()=>{"use strict";const e=document.querySelectorAll(".tom-select-variant");Array.from(e).forEach((e=>{let t=e.closest("form"),n=JSON.parse(e.dataset.variants),r=[];Array.from(n).forEach((e=>{e.option_values.forEach((t=>{r.push({id:e.id,name:t.name,value:t.value})}))})),new TomSelect(e,{valueField:"id",options:n,render:{option:function(e,t){let n='<div class="border-bottom">';return n+='<div class="row g-1">',e.option_values.forEach((e=>{n+='<span class="fw-bold col-4">'+t(e.name)+'</span><span class="col-8">'+t(e.value)+"</span>"})),n+="</div>",n+="</div>",n},item:function(e,t){let n='<div class="bg-light rounded p-2">';return n+='<div class="row g-1">',e.option_values.forEach((e=>{n+='<span class="fw-bold col-4">'+t(e.name)+'</span><span class="col-8">'+t(e.value)+"</span>"})),n+="</div>",n+="</div>",n}},onItemAdd:function(e){t.querySelector("input[name=variant_id]").value=e,t.querySelector("[type=submit]").disabled=!1},onItemRemove:function(e){t.querySelector("input[name=variant_id]").value="",t.querySelector("[type=submit]").disabled=!0}})}))})();const producMegaLinks=document.querySelectorAll("[data-mega-linkid]"),producMegaContents=document.querySelectorAll("[data-mega-contentid]"),productMegaHover=e=>{var t=e.dataset.megaLinkid,n=document.querySelector('[data-mega-contentid="'+t+'"]');Array.from(producMegaLinks).forEach((e=>{e.classList.remove("active")})),Array.from(producMegaContents).forEach((e=>{e.classList.remove("d-flex"),e.classList.add("d-none")})),e.classList.add("active"),n.classList.remove("d-none"),n.classList.add("d-flex")};
