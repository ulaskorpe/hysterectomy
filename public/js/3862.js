"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3862],{3862:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var n=a(1842),l=a(3533),o=a(2995),r=a(1637),c=a(3045),s=a(8540),i=a(2693),u=a(2835),d=a(5094),m=a(7109),p=a(2135),f={key:0},b={class:"table align-middle table-row-bordered table-hover g-3"},v={class:"px-3 fw-semibold"},k={class:"px-3"},h=["src"],N={key:0},y={key:1,class:"badge badge-danger"},w={key:0},E={key:1,class:"badge badge-danger"};const V={__name:"UploadWorkshopExcelDropzone",props:{uploadDone:{type:Function,required:!1}},setup:function(e){var t=(0,n.ref)(!1),a=(0,n.ref)(!1),V=(0,n.ref)(!1),g=(0,n.ref)(!0),x=(0,n.ref)(!1),_=(0,n.ref)([]),B=(0,n.ref)([]),C=(0,d.S)(),A=function(){t.value=!1,g.value=!0,V.value=!1,x.value=!1,B.value=[],_.value=[]},j=(0,o.mN)({json_data:[],excel_uuid:""}),S=(0,o.mN)({json_data:[]}),D=function(e){return[{"bg-danger text-white":!0===e.is_exists}]},U=function(){t.value=!0,S.json_data=[],fetch(route("mp.workshop.import.match"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":(0,o.N5)().props.csrf_token},body:JSON.stringify({json_data:j.json_data,excel_uuid:j.excel_uuid})}).then((function(e){return e.json()})).then((function(e){t.value=!1,e.success?(S.json_data=e.review_items,V.value=!0):alert(e.message)}))},T=function(){C.require({message:"Tüm etkinliklerin eklenmesi zaman alabilir. Lütfen ekranı kapatmayın.",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:"İptal",acceptLabel:"Başlat",accept:function(){L()},reject:function(){}})},L=function(){t.value=!0,S.post(route("mp.workshop.import.store"),{onSuccess:function(){A(),a.value=!1}})},z=(0,n.ref)(null),F=function(){null!==z.value&&new l.A(z.value,{url:route("mp.workshop.import.upload"),parallelUploads:1,uploadMultiple:!1,maxFilesize:50,maxFiles:1,paramName:"file",acceptedFiles:".xlsx",headers:{"X-CSRF-TOKEN":(0,o.N5)().props.csrf_token},addRemoveLinks:!0,accept:function(e,t){"wow.jpg"==e.name?t("Naha, you don't."):t()}}).on("success",(function(e,t){g.value=!1,x.value=!0,B.value=t.headings[0][0],_.value=t.match_fields,j.excel_uuid=t.excel_uuid}))};return function(e,l){var o=(0,n.resolveComponent)("FormErrors");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("button",{type:"button",class:"btn fw-bold btn-sm btn-light d-flex align-items-center",onClick:l[0]||(l[0]=function(e){return a.value=!0})},l[4]||(l[4]=[(0,n.createElementVNode)("i",{class:"bi bi-box-arrow-in-right fs-4"},null,-1),(0,n.createElementVNode)("span",{class:"ms-1 lh-1"},"IMPORT",-1)])),(0,n.createVNode)((0,n.unref)(r.A),{visible:a.value,"onUpdate:visible":l[1]||(l[1]=function(e){return a.value=e}),onHide:A,modal:"",header:"Workshop dosyası yükle",onShow:F,style:{width:"50vw"},breakpoints:{"1200px":"75vw","960px":"85vw","641px":"95vw"}},{default:(0,n.withCtx)((function(){return[(0,n.withDirectives)((0,n.createElementVNode)("div",{ref_key:"dropRef",ref:z,class:"dropzone"},l[5]||(l[5]=[(0,n.createElementVNode)("div",{class:"dz-message needsclick"},[(0,n.createElementVNode)("i",{class:"bi bi-cloud-arrow-up fs-3x text-primary"}),(0,n.createElementVNode)("div",{class:"ms-4"},[(0,n.createElementVNode)("h3",{class:"fs-5 fw-bold text-gray-900 mb-1"},"Dosyayı buraya sürükleyin veya tıklayın."),(0,n.createElementVNode)("span",{class:"fs-7 fw-semibold text-gray-500"},"Sadece xlsx dosyası")])],-1)]),512),[[n.vShow,g.value]]),x.value&&B.value.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",f,[(0,n.createElementVNode)("div",{class:"hstack align-items-center justify-content-between"},[l[6]||(l[6]=(0,n.createElementVNode)("h4",{class:"mb-0"},"Kolonları Eşleştir",-1)),(0,n.createElementVNode)("button",{type:"button",class:"btn btn-sm btn-light",onClick:A},"Geri")]),(0,n.createVNode)((0,n.unref)(c.A)),(0,n.createElementVNode)("form",{class:"table-responsive",onSubmit:(0,n.withModifiers)(U,["prevent"])},[(0,n.createElementVNode)("table",b,[l[7]||(l[7]=(0,n.createElementVNode)("thead",{class:"bg-light"},[(0,n.createElementVNode)("tr",{class:"fw-bold fs-6"},[(0,n.createElementVNode)("th",{class:"w-50 px-3"},"Excel Başlık"),(0,n.createElementVNode)("th",{class:"w-50 px-3"},"Değer")])],-1)),(0,n.createElementVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(B.value,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("tr",{key:t},[(0,n.createElementVNode)("td",v,(0,n.toDisplayString)(e),1),(0,n.createElementVNode)("td",k,[(0,n.createVNode)((0,n.unref)(s.A),{modelValue:(0,n.unref)(j).json_data[t],"onUpdate:modelValue":function(e){return(0,n.unref)(j).json_data[t]=e},options:_.value,filter:"",optionValue:"value",optionLabel:"label",variant:"filled",size:"small",class:"w-100"},null,8,["modelValue","onUpdate:modelValue","options"])])])})),128))])]),(0,n.createVNode)((0,n.unref)(c.A)),(0,n.createVNode)(o,{form:(0,n.unref)(j)},null,8,["form"]),l[8]||(l[8]=(0,n.createElementVNode)("button",{type:"submit",class:"btn btn-success"},"ÖNİZLEME",-1))],32)])):(0,n.createCommentVNode)("",!0)]})),_:1},8,["visible"]),(0,n.createVNode)((0,n.unref)(r.A),{visible:V.value,"onUpdate:visible":l[3]||(l[3]=function(e){return V.value=e}),modal:"",maximizable:"",header:"Önizleme & Kaydet",style:{width:"95vw"}},{footer:(0,n.withCtx)((function(){return[(0,n.createElementVNode)("button",{type:"button",class:"btn btn-warning",onClick:l[2]||(l[2]=function(e){return V.value=!1})},"GERİ GÖN"),(0,n.createElementVNode)("button",{type:"button",class:"btn btn-primary",onClick:T},"KAYDET")]})),default:(0,n.withCtx)((function(){return[(0,n.createVNode)((0,n.unref)(i.A),{value:(0,n.unref)(S).json_data,rowClass:D,stripedRows:"",tableStyle:"min-width: 50rem"},{empty:(0,n.withCtx)((function(){return l[9]||(l[9]=[(0,n.createTextVNode)(" Seçilen kriterlere uygun kayıt bulunamadı. ")])})),default:(0,n.withCtx)((function(){return[(0,n.createVNode)((0,n.unref)(u.A),{header:"Görsel"},{body:(0,n.withCtx)((function(e){var t=e.data;return[t.image?((0,n.openBlock)(),(0,n.createElementBlock)("img",{key:0,src:t.image.preview_url,width:"50",class:"rounded"},null,8,h)):(0,n.createCommentVNode)("",!0)]})),_:1}),(0,n.createVNode)((0,n.unref)(u.A),{field:"event_date",header:"Tarih"}),(0,n.createVNode)((0,n.unref)(u.A),{header:"Şube"},{body:(0,n.withCtx)((function(e){var t=e.data;return[t.team?((0,n.openBlock)(),(0,n.createElementBlock)("span",N,(0,n.toDisplayString)(t.team.name),1)):((0,n.openBlock)(),(0,n.createElementBlock)("span",y,"ŞUBE BULUNAMADI"))]})),_:1}),(0,n.createVNode)((0,n.unref)(u.A),{header:"Kategori"},{body:(0,n.withCtx)((function(e){var t=e.data;return[t.category?((0,n.openBlock)(),(0,n.createElementBlock)("span",w,(0,n.toDisplayString)(t.category.name),1)):((0,n.openBlock)(),(0,n.createElementBlock)("span",E,"KATEGORİ BULUNAMADI"))]})),_:1}),(0,n.createVNode)((0,n.unref)(u.A),{field:"name",header:"Etkinlik Adı"})]})),_:1},8,["value"])]})),_:1},8,["visible"]),(0,n.createVNode)((0,n.unref)(m.A)),(0,n.createVNode)((0,n.unref)(p.A),{blocked:t.value,fullScreen:""},null,8,["blocked"])])}}}}}]);
//# sourceMappingURL=3862.js.map