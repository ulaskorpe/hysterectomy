{"version":3,"file":"js/5904.js","mappings":";soPAKA,oEC0CA,IAAMA,EAAQC,EAIRC,GAAOC,EAAAA,EAAAA,IAAQ,CACjBC,QAASJ,EAAMK,MAAMD,QACrBE,WAAYN,EAAMK,MAAMC,aAGtBC,GAAcC,EAAAA,EAAAA,KAAI,MAElBC,EAAe,WACjBF,EAAYG,MAAMC,OAAOC,WAAWC,KAAKC,MAAMD,KAAKE,UAAUf,EAAMK,MAAMC,aAC9E,EAEMU,EAAc,WAEhB,IAAIC,EAAiBC,SAASC,eAAe,kBAC7CD,SAASE,cAAc,UAAUC,MAAMC,UAAYL,EAAeM,aAAe,IAErF,EAEMC,EAAU,eAAAC,EAAAC,EAAAC,IAAAC,MAAG,SAAAC,IAAA,OAAAF,IAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACT,IAAIC,SAAQ,SAAAC,GACV5B,EAAYG,OAASH,EAAYG,MAAMC,QACvCJ,EAAYG,MAAMC,OAAOa,YAAW,SAACY,GACjClC,EAAKI,WAAa8B,EAClBC,QAAQC,IAAI,UACZH,GACJ,GAER,IAAE,wBAAAJ,EAAAQ,OAAA,GAAAV,EAAA,KACL,kBAVe,OAAAJ,EAAAe,MAAA,KAAAC,UAAA,KAYVC,EAAU,eAAAC,EAAAjB,EAAAC,IAAAC,MAAG,SAAAgB,IAAA,OAAAjB,IAAAG,MAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EACT,IAAIC,SAAQ,SAAAC,GACV5B,EAAYG,OAASH,EAAYG,MAAMC,QACvCJ,EAAYG,MAAMC,OAAO+B,YAAW,SAACI,GACjC5C,EAAKE,QAAU0C,EAAKC,KACpBV,QAAQC,IAAI,QACZH,GACJ,GAER,IAAE,wBAAAU,EAAAN,OAAA,GAAAK,EAAA,KACL,kBAVe,OAAAD,EAAAH,MAAA,KAAAC,UAAA,KAYVO,EAAU,eAAAC,EAAAvB,EAAAC,IAAAC,MAAG,SAAAsB,IAAA,OAAAvB,IAAAG,MAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cAAAkB,EAAAlB,KAAA,EACT,IAAIC,SAAQ,SAAAC,GACdjC,EAAKkD,IAAIC,MAAM,wBAAyBrD,EAAMK,OAAQ,CAClDiD,gBAAgB,EAChBC,UAAW,SAACC,GAEZ,GAER,IAAE,wBAAAL,EAAAZ,OAAA,GAAAW,EAAA,KACL,kBATe,OAAAD,EAAAT,MAAA,KAAAC,UAAA,KAWVgB,EAAM,eAAAC,EAAAhC,EAAAC,IAAAC,MAAG,SAAA+B,IAAA,OAAAhC,IAAAG,MAAA,SAAA8B,GAAA,cAAAA,EAAA5B,KAAA4B,EAAA3B,MAAA,cAAA2B,EAAA3B,KAAA,EACLT,IAAY,cAAAoC,EAAA3B,KAAA,EACZS,IAAY,cAAAkB,EAAA3B,KAAA,EACZe,IAAY,wBAAAY,EAAArB,OAAA,GAAAoB,EAAA,KACrB,kBAJW,OAAAD,EAAAlB,MAAA,KAAAC,UAAA","sources":["webpack:///./resources/js/Pages/EmailContent/EditEmailContent.vue?c916","webpack:///./resources/js/Pages/EmailContent/EditEmailContent.vue"],"sourcesContent":["import script from \"./EditEmailContent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EditEmailContent.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n    <Head head-key=\"title\" title=\"Email güncelle\" />\n\n    <div id=\"kt_app_toolbar\" class=\"app-toolbar  py-3 py-lg-6\">\n        <div id=\"kt_app_toolbar_container\" class=\"app-container  container-fluid d-flex flex-stack \">\n            \n            <div  class=\"page-title d-flex flex-column justify-content-center flex-wrap me-3\">\n                <h1 class=\"page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0\">\n                    Email güncelle: {{ props.email.name }}\n                </h1>\n            </div>\n\n            <div class=\"d-flex align-items-center gap-2 gap-lg-3\">\n                <Link :href=\"route('email-contents.index')\" class=\"btn fw-bold btn-sm btn-secondary d-flex align-items-center me-2\">\n                    <i class=\"bi bi-arrow-left fs-4\"></i>\n                    <span class=\"ms-1 lh-1\">geri</span>\n                </Link>\n            </div>\n\n        </div>\n    </div>\n\t\n    <div id=\"kt_app_content\" class=\"app-content flex-column-fluid\">\n        <div id=\"kt_app_content_container\" class=\"app-container container-fluid h-100\">\n            <form @submit.prevent=\"update\" class=\"h-100\">\n                <div class=\"card h-100\">\n                    <div class=\"card-body position-relative\">\n                        <div id=\"emailEditorDiv\" class=\"h-100\">\n                            <EmailEditor ref=\"emailEditor\" @load=\"editorLoaded\" @ready=\"editorReady\"/>\n                        </div>\n                    </div>\n                    <div class=\"card-footer\">\n                        <button class=\"btn fw-bold btn-success ms-auto\" type=\"submit\">Kaydet</button>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n\n</template>\n\n<script setup>\n\nimport { ref } from \"vue\";\nimport { useForm } from \"@inertiajs/vue3\";\nimport { EmailEditor } from 'vue-email-editor';\n\nconst props = defineProps({\n    email: Object\n});\n\nconst form = useForm({\n    content: props.email.content,\n    admin_json: props.email.admin_json\n});\n\nconst emailEditor = ref(null);\n\nconst editorLoaded = () => {\n    emailEditor.value.editor.loadDesign(JSON.parse(JSON.stringify(props.email.admin_json)));\n}\n\nconst editorReady = () => {\n\n    let emailEditorDiv = document.getElementById('emailEditorDiv');\n    document.querySelector('iframe').style.minHeight = emailEditorDiv.offsetHeight + \"px\";\n\n}\n\nconst saveDesign = async () => {\n    await new Promise(resolve => {\n        if (emailEditor.value && emailEditor.value.editor) {\n            emailEditor.value.editor.saveDesign((design) => {\n                form.admin_json = design;\n                console.log('design');\n                resolve();\n            });\n        }\n    });\n};\n\nconst exportHtml = async () => {\n    await new Promise(resolve => {\n        if (emailEditor.value && emailEditor.value.editor) {\n            emailEditor.value.editor.exportHtml((data) => {\n                form.content = data.html;\n                console.log('html');\n                resolve();\n            });\n        }\n    });\n};\n\nconst submitForm = async () => {\n    await new Promise(resolve => {\n        form.put(route('email-contents.update', props.email), {\n            preserveScroll: true,\n            onSuccess: (page) => {\n\n            }\n        });\n    });\n};\n\nconst update = async () => {\n    await saveDesign();\n    await exportHtml();\n    await submitForm();\n};\n\n</script>"],"names":["props","__props","form","useForm","content","email","admin_json","emailEditor","ref","editorLoaded","value","editor","loadDesign","JSON","parse","stringify","editorReady","emailEditorDiv","document","getElementById","querySelector","style","minHeight","offsetHeight","saveDesign","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","Promise","resolve","design","console","log","stop","apply","arguments","exportHtml","_ref2","_callee2","_context2","data","html","submitForm","_ref3","_callee3","_context3","put","route","preserveScroll","onSuccess","page","update","_ref4","_callee4","_context4"],"sourceRoot":""}